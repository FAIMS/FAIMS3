# Project Documentation

This directory contains documentation for the project written using Markdown for
processing with the Sphinx document processing pipeline.

User documentation is in the `user` directory and is meant to be processed for end-user
documentation.   Developer documentation is in the `developer` directory and will generally
just be made available as part of the repository.

## Writing Documentation

For developer documentation, just add markdown formatted files in the `docs/source/markdown` directory.
Since the developer documentation is not intended for user-facing publication, this can be
in whatever form is useful to future developers.

For user facing documentation in the `user` directory, ensure that the documentation is
organised appropriately.  Add any new markdown pages into the `index.md` file so that they
appear in the generated site navigation.

When writing user documentation we need to ensure that names or words that might vary between
different configurations can be replaced appropriately.  We use markdown variable substitutions
to achieve this with variables in {{double-braces}}.  Please use the following in your writing:

- {{FAIMS}} for the name of the product (Fieldmark or Bushfire Surveyor)
- {{notebook}} (or {{Notebook}} or {{notebooks}}) for the name of a project (notebook or survey), similarly  {{notebooks}}, {{Notebook}}, {{Notebooks}}
- {{dashboard}} (or {{Dashboard}}) for the name of the management web application (dashboard, manager or control centre)

## Directory Structure

To facilitate navigation we use a main index.md file that references sub-directories
that contain their own index.md.  Each of these should contain a `{toctree}` block
that references the files in the sub-directory.   See the existing sub-directories
for examples of this and follow the same pattern.   This will make it easier to
manage the overall index and ensure that every page is findable.

## Missing Pages

There is a placeholder file `todo.md` which you can link to for a page that is not yet
written.  Please do this rather than linking to a non-existing file.  We can then
search for these links and fill them in at a later time.

## Links

You can include links to the different websites with the following macros:

```markdown
- {{FAIMS}} {{dashboard}} - {{WEB_URL}}
- Data collection app (web version) - {{APP_URL}}
- API URL (for programmatic access) - {{API_URL}}
- {{IOS_APP_LINK}}
- {{ANDROID_APP_LINK}}
```

## Screenshots

Screenshots will (eventually) be automatically generated by the e2e tests.  These will be
written to the `user/screenshots` directory using a naming convention based on the configured theme (the value of VITE_THEME)
and the screen size (mobile, tablet or desktop):

```text
{{theme}}/{{tag}}/image-name-{{screen size}}.png
```

To insert a screenshot image in a page use the {screenshot} directive:

~~~markdown
```{screenshot} getting-started/app-login-mobile.png
:alt: Login Screen
:align: right
```
~~~

For desktop screenshots you can add `:width: 100%` to show the full width image (default is
optimised for a portrait mobile screenshot).

The `theme` part of the name is derived from the configured VITE_THEME
setting.

Images that are not theme dependent screenshots can be stored in the
images directory and inserted using the normal {image} directive.

## Build the Documentation

The easiest way to build the docs is via a docker image with Sphinx installed.  The following
commands can be used:

Build the user documentation in HTML format:

```bash
make user-docs
```

Build the developer documentation in HTML format:

```bash
make developer-docs
```

Outputs in each case go into the `build` folder in the respective directory.
